<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thomann Retail Media Proposal Generator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // Correctly accessing Lucide icons from the global 'lucide' object provided by the CDN
        const PlusCircle = (props) => <i data-lucide="plus-circle" {...props}></i>;
        const Trash2 = (props) => <i data-lucide="trash-2" {...props}></i>;
        const Copy = (props) => <i data-lucide="copy" {...props}></i>;
        const CheckCircle2 = (props) => <i data-lucide="check-circle-2" {...props}></i>;
        const Zap = (props) => <i data-lucide="zap" {...props}></i>;
        const Eye = (props) => <i data-lucide="eye" {...props}></i>;
        const Edit3 = (props) => <i data-lucide="edit-3" {...props}></i>;

        const FORMAT_TEMPLATES = {
            "Paid Social Media Campaign": {
                description: "Highly targeted full-funnel advertising across Meta (Instagram/Facebook) and TikTok. We leverage Thomann's exclusive 1st-party data to reach verified music creators and purchasing decision-makers.",
                defaultBudget: 2500,
                kpis: ["Reach", "CTR", "ROAS"]
            },
            "Rich Content": {
                description: "Premium A+ Brand Content implementation on your product detail pages. Includes high-fidelity image galleries, technical comparison modules, and interactive storytelling to optimize conversion.",
                defaultBudget: 1500,
                kpis: ["CVR Lift", "Time on Page"]
            },
            "Google Ad Campaign": {
                description: "Strategic Search and Shopping placement capturing high-intent traffic at the 'point of search'. Includes campaign management and performance optimization by our in-house certified specialists.",
                defaultBudget: 3000,
                kpis: ["Impressions", "Direct Sales"]
            },
            "Sponsored YouTube Video": {
                description: "Authentic product integration or dedicated review on Thomann's leading YouTube channels. Expert demos by professional musicians ensuring maximum credibility within the community.",
                defaultBudget: 5000,
                kpis: ["Views", "Engagement", "Brand Sentiment"]
            }
        };

        const ThomannLogo = ({ color = "#00b5bd" }) => (
            <svg viewBox="0 0 100 100" className="w-12 h-12">
                <circle cx="50" cy="50" r="48" fill="none" stroke={color} strokeWidth="4"/>
                <path 
                    d="M35 30 V45 H25 V55 H35 V75 C35 82 40 85 48 85 H60 V75 H52 C48 75 46 74 46 70 V55 H65 V45 H46 V30 Z" 
                    fill={color} 
                    transform="rotate(-5 50 50)"
                />
            </svg>
        );

        const App = () => {
            const [activeTab, setActiveTab] = useState('input');
            const [brandName, setBrandName] = useState('');
            const [campaignName, setCampaignName] = useState('');
            const [selectedFormats, setSelectedFormats] = useState([]);
            const [copySuccess, setCopySuccess] = useState(false);

            // Re-initialize Lucide icons whenever the tab changes or formats are added
            React.useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [activeTab, selectedFormats]);

            const addFormat = (formatName) => {
                const template = FORMAT_TEMPLATES[formatName];
                const newEntry = {
                    id: crypto.randomUUID(),
                    name: formatName,
                    description: template.description,
                    budget: template.defaultBudget,
                    kpis: template.kpis
                };
                setSelectedFormats([...selectedFormats, newEntry]);
            };

            const updateBudget = (id, value) => {
                setSelectedFormats(selectedFormats.map(f => 
                    f.id === id ? { ...f, budget: parseFloat(value) || 0 } : f
                ));
            };

            const removeFormat = (id) => {
                setSelectedFormats(selectedFormats.filter(f => f.id !== id));
            };

            const totalNet = useMemo(() => {
                return selectedFormats.reduce((sum, item) => sum + item.budget, 0);
            }, [selectedFormats]);

            const copyToClipboard = () => {
                const element = document.getElementById('proposal-content');
                const range = document.createRange();
                range.selectNode(element);
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(range);
                document.execCommand('copy');
                window.getSelection().removeAllRanges();
                
                setCopySuccess(true);
                setTimeout(() => setCopySuccess(false), 2000);
            };

            return (
                <div className="min-h-screen bg-white flex flex-col font-sans">
                    <header className="bg-white border-b border-slate-100 sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <div className="bg-[#00b5bd] p-2 rounded">
                                    <Zap className="text-white w-4 h-4" />
                                </div>
                                <h1 className="text-sm font-black uppercase tracking-tight leading-none hidden sm:block">
                                    THOMANN<br/><span className="text-[#00b5bd]">RETAIL MEDIA</span>
                                </h1>
                            </div>

                            <nav className="flex bg-slate-100 p-1 rounded-full">
                                <button 
                                    onClick={() => setActiveTab('input')}
                                    className={`flex items-center gap-2 px-5 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-widest transition-all ${activeTab === 'input' ? 'bg-black text-white shadow-md' : 'text-slate-500 hover:text-black'}`}
                                >
                                    <Edit3 className="w-3 h-3" />
                                    Configure
                                </button>
                                <button 
                                    onClick={() => setActiveTab('output')}
                                    className={`flex items-center gap-2 px-5 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-widest transition-all ${activeTab === 'output' ? 'bg-black text-white shadow-md' : 'text-slate-500 hover:text-black'}`}
                                >
                                    <Eye className="w-3 h-3" />
                                    Preview
                                </button>
                            </nav>

                            <div className="text-right hidden md:block">
                                <p className="text-[9px] font-bold text-slate-400 uppercase tracking-widest leading-none">Net Total</p>
                                <p className="text-lg font-bold italic tracking-tighter text-[#00b5bd]">€ {totalNet.toLocaleString('de-DE', { minimumFractionDigits: 2 })}</p>
                            </div>
                        </div>
                    </header>

                    <main className="flex-1 relative overflow-y-auto">
                        {activeTab === 'input' ? (
                            <div className="max-w-4xl mx-auto p-8 md:p-12">
                                <div className="space-y-12">
                                    <section className="space-y-6">
                                        <div className="flex items-center gap-3">
                                            <div className="w-1.5 h-5 bg-[#00b5bd]"></div>
                                            <h2 className="text-sm font-black uppercase tracking-wide">Campaign Context</h2>
                                        </div>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                            <div className="relative border-b-2 border-slate-100 focus-within:border-[#00b5bd]">
                                                <label className="block text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-1">Brand Partner</label>
                                                <input type="text" className="w-full py-2 bg-transparent outline-none font-bold text-lg" value={brandName} onChange={(e) => setBrandName(e.target.value)} />
                                            </div>
                                            <div className="relative border-b-2 border-slate-100 focus-within:border-[#00b5bd]">
                                                <label className="block text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-1">Campaign Name</label>
                                                <input type="text" className="w-full py-2 bg-transparent outline-none font-bold text-lg" value={campaignName} onChange={(e) => setCampaignName(e.target.value)} />
                                            </div>
                                        </div>
                                    </section>

                                    <section className="space-y-6">
                                        <div className="flex items-center gap-3 border-b border-black pb-2">
                                            <div className="w-1.5 h-5 bg-black"></div>
                                            <h2 className="text-sm font-black uppercase tracking-wide">Formats</h2>
                                        </div>
                                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                            {Object.keys(FORMAT_TEMPLATES).map(name => (
                                                <button key={name} onClick={() => addFormat(name)} className="group p-4 bg-slate-50 hover:bg-[#00b5bd] hover:text-white transition-all text-left flex justify-between items-center">
                                                    <span className="text-[11px] font-bold uppercase tracking-widest block">{name}</span>
                                                    <PlusCircle className="w-4 h-4 opacity-20 group-hover:opacity-100 transition-all" />
                                                </button>
                                            ))}
                                        </div>
                                    </section>

                                    <section className="space-y-6">
                                        <div className="flex items-center gap-3">
                                            <div className="w-1.5 h-5 bg-[#00b5bd]"></div>
                                            <h2 className="text-sm font-black uppercase tracking-wide">Your Campaign Mix</h2>
                                        </div>
                                        <div className="space-y-3">
                                            {selectedFormats.map((format) => (
                                                <div key={format.id} className="flex flex-col sm:flex-row sm:items-center gap-4 p-5 bg-white border border-slate-100 hover:border-[#00b5bd]/40 transition-all">
                                                    <div className="flex-1">
                                                        <h4 className="font-bold text-xs uppercase tracking-widest mb-1">{format.name}</h4>
                                                        <p className="text-[10px] text-slate-400 max-w-md font-medium">{format.description.substring(0, 100)}...</p>
                                                    </div>
                                                    <div className="flex items-center gap-4">
                                                        <div className="flex flex-col items-end">
                                                            <label className="text-[9px] font-bold text-slate-300 uppercase mb-1">Budget (NET)</label>
                                                            <div className="flex items-center">
                                                                <span className="text-xs font-bold mr-1">€</span>
                                                                <input type="number" className="w-24 bg-slate-50 px-2 py-1.5 text-right font-mono font-bold text-sm outline-none focus:ring-1 focus:ring-[#00b5bd]" value={format.budget} onChange={(e) => updateBudget(format.id, e.target.value)} />
                                                            </div>
                                                        </div>
                                                        <button onClick={() => removeFormat(format.id)} className="p-1 text-slate-200 hover:text-red-600 transition-colors">
                                                            <Trash2 className="w-4 h-4" />
                                                        </button>
                                                    </div>
                                                </div>
                                            ))}
                                            {selectedFormats.length === 0 && (
                                                <p className="text-xs text-slate-400 italic py-4">Add some formats from the section above to get started.</p>
                                            )}
                                        </div>
                                    </section>
                                </div>
                            </div>
                        ) : (
                            <div className="bg-[#f1f5f9] min-h-full py-12 px-6">
                                <div className="max-w-[800px] mx-auto">
                                    <div className="mb-4 flex justify-end">
                                        <button onClick={copyToClipboard} className={`flex items-center gap-2 px-6 py-2 rounded shadow-lg text-[10px] font-bold uppercase tracking-widest transition-all ${copySuccess ? 'bg-green-600 text-white' : 'bg-[#00b5bd] text-white hover:bg-black'}`}>
                                            {copySuccess ? <CheckCircle2 className="w-3 h-3" /> : <Copy className="w-3 h-3" />}
                                            {copySuccess ? 'Copied to Clipboard' : 'Copy Content'}
                                        </button>
                                    </div>
                                    <div id="proposal-content" className="bg-white p-12 md:p-16 shadow-xl text-black min-h-[1000px] flex flex-col font-sans text-sm leading-tight">
                                        <div className="flex justify-between items-start mb-16">
                                            <div className="border-l-[10px] border-[#00b5bd] pl-6">
                                                <h1 className="text-4xl font-black uppercase tracking-tight leading-[0.9] mb-2">MARKETING<br/>PROPOSAL</h1>
                                                <p className="text-[9px] font-bold tracking-[0.4em] uppercase text-slate-400">Thomann <span className="text-[#00b5bd]">Retail Media</span> Portfolio</p>
                                            </div>
                                            <div className="text-right"><ThomannLogo /></div>
                                        </div>

                                        <div className="mb-12 grid grid-cols-12 gap-6">
                                            <div className="col-span-8">
                                                <h2 className="text-[10px] font-black uppercase tracking-wide text-[#00b5bd] mb-3">Partner</h2>
                                                <h3 className="text-3xl font-black tracking-tight leading-none mb-2">{brandName || '[Brand Partner]'}</h3>
                                                <p className="text-lg font-bold text-slate-400 italic">Campaign: {campaignName || '[Campaign Name]'}</p>
                                            </div>
                                            <div className="col-span-4 pt-1.5 border-t-2 border-black">
                                                <p className="text-[9px] font-bold uppercase tracking-widest mb-1">Date</p>
                                                <p className="font-bold">{new Date().toLocaleDateString('en-GB', { day: '2-digit', month: 'long', year: 'numeric' })}</p>
                                            </div>
                                        </div>

                                        <div className="mb-12 flex-1">
                                            <h3 className="text-[10px] font-black uppercase tracking-wide text-[#00b5bd] mb-8 border-b border-slate-100 pb-2">Tactical Breakdown</h3>
                                            <div className="space-y-8">
                                                {selectedFormats.map((format, idx) => (
                                                    <div key={format.id} className="grid grid-cols-12 gap-4">
                                                        <div className="col-span-1 text-2xl font-black text-slate-100">{(idx + 1).toString().padStart(2, '0')}</div>
                                                        <div className="col-span-11">
                                                            <h4 className="text-black font-black uppercase text-lg mb-1.5 tracking-tight">{format.name}</h4>
                                                            <p className="text-xs leading-normal text-slate-600 mb-3 max-w-2xl font-medium">{format.description}</p>
                                                            <div className="flex flex-wrap gap-1.5">
                                                                {format.kpis?.map(kpi => (
                                                                    <span key={kpi} className="px-2 py-0.5 bg-black text-[#00b5bd] text-[8px] font-bold uppercase tracking-wider">{kpi}</span>
                                                                ))}
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="mt-8">
                                            <div className="bg-black p-8 text-white relative overflow-hidden">
                                                <div className="absolute -right-6 -bottom-6 opacity-5 rotate-12 pointer-events-none scale-75"><ThomannLogo color="#ffffff" /></div>
                                                <h3 className="text-[10px] font-black uppercase tracking-wide mb-6 text-[#00b5bd]">Financial Commitment</h3>
                                                <div className="space-y-3 mb-8 relative z-10">
                                                    {selectedFormats.map(f => (
                                                        <div key={f.id} className="flex justify-between items-center">
                                                            <span className="text-[10px] font-bold uppercase tracking-widest opacity-50">{f.name}</span>
                                                            <div className="flex-1 mx-4 border-b border-white/10 border-dotted"></div>
                                                            <span className="font-mono font-bold text-xs">€ {f.budget.toLocaleString('de-DE', { minimumFractionDigits: 2 })}</span>
                                                        </div>
                                                    ))}
                                                </div>
                                                <div className="flex justify-between items-end pt-6 border-t-2 border-[#00b5bd] relative z-10">
                                                    <div>
                                                        <h4 className="text-2xl font-black uppercase tracking-tight italic">Total Net</h4>
                                                        <p className="text-[8px] font-bold uppercase tracking-[0.2em] text-[#00b5bd] mt-1">Pricing excl. VAT</p>
                                                    </div>
                                                    <div className="text-right">
                                                        <span className="text-4xl font-black text-white italic tracking-tighter">€ {totalNet.toLocaleString('de-DE', { minimumFractionDigits: 2 })}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="mt-8 flex justify-between items-center text-[8px] font-bold uppercase tracking-[0.2em] text-slate-300">
                                                <p>Thomann Retail Media Agency • Hans-Thomann-Str. 1 • 96138 Burgebrach</p>
                                                <p>Ref: #{Math.floor(Math.random() * 90000) + 10000}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
